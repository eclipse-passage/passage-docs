<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html>
<head>
<title>Example: Floating License Server</title>
<script type="text/javascript" src="js/sh_main.min.js"
	language="JavaScript"></script>
<script type="text/javascript" src="js/lang/sh_java.min.js"
	language="JavaScript"></script>
<script type="text/javascript" src="js/lang/sh_xml.min.js"
	language="JavaScript"></script>
<script type="text/javascript" src="js/lang/sh_properties.min.js"
	language="JavaScript"></script>
<link href="css/sh_whitengrey.min.css" rel="stylesheet" type="text/css"
	media="all" />
<link rel="preconnect" href="https://fonts.gstatic.com">
<link
	href="https://fonts.googleapis.com/css2?family=Montserrat&family=Quicksand&display=swap"
	rel="stylesheet">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/docs.css" rel="stylesheet" type="text/css" media="all" />

</head>
<body onload="sh_highlightDocument();">
	<div class="titling">
		<p>
			<a
				href="https://download.eclipse.org/passage/downloads/release/2.0.1/fls/">Eclipse
				Passage Floating License Server</a> is itself a product <a
				href="dev-guide.html">licensed with Passage</a>.
		</p>
		<p>Let's examine which steps it took to get protected with
			license.</p>
	</div>
	<div class="container-fliud">
		<div class="row separator">
			<div class="col-sm-12"></div>
		</div>
		<div class="row statement">
			<div class="step-name col-sm-3">
				Step 1: declare <span class="term">licensing requirements</span>
			</div>
			<div class="step-explanation col-sm-9">
				<p>
					FLS <span class="role">architects</span> defined three <span
						class="term">feature</span>s for this product, meaning these three
					functions are designed to be matched with licensing coverage:
				</p>
				<ul>
					<li><span class="sample">org.eclipse.passage.lbc.fls.product</span>
						- feature of the product as a whole and thus must be identified
						with the <span class="sample">product id</span>;</li>
					<li><span class="sample">org.eclipse.passage.lbc.acquire.concurrent</span>
						- base, limited edition of one particular internal function;</li>
					<li><span class="sample">org.eclipse.passage.lbc.acquire.concurrent.full</span>
						- unlimited edition of the same functionality.</li>
				</ul>
				<p>
					It was also agreed (usually defined by <span class="role">marketing</span>
					department), that the first two features is allowed to be used in
					an absence of a license, but with warnings that remind user of
					insufficient license coverage.
				</p>
				<p>The last feature can be used only when licensed properly.</p>
				<p>
					After evolution, all three features achieve some mature state which
					was coined as <span class="sample">2.0.0 version</span>.
				</p>
			</div>

		</div>
		<div class="row impl">
			<div class="brief col-sm-3">
				Thus, <span class="role">developer</span> declares <span
					class="term">licensing requirements</span> for these three features
			</div>
			<div class="col-sm-9">
				<ul>
					<li>
						<p>
							<span class="term">Licensing requirements</span> for the core
							product feature <span class="sample">org.eclipse.passage.lbc.fls.product</span>
							is declared in <a
								href="https://github.com/eclipse-passage/passage/tree/master/bundles/org.eclipse.passage.lbc.fls.seal/META-INF/MANIFEST.MF"
								target="_blank">FLS Seal</a> plug-in as it represents the
							product on the bundles level:
						<pre class="code sh_properties">Provide-Capability: licensing.feature;licensing.feature="org.eclipse.passage.lbc.fls.product";name="Eclipse Passage Floating License Server";version="2.0.0";provider="Eclispe Passage";level="warn"</pre>
						</p>
						<p>
							The requirement is declared with <span class="sample">warn</span>
							<span class="term">restriction level</span>, which precisely
							means <span class="sample">if there is no license, expose
								warning to a user</span>. This work is to be done by the development as
							well.
						</p>
						<p>
							Development guarantees, that the core <span class="term">feature</span>
							identifier is precisely equal to the <span class="sample">product
								identifier</span>, which is our case can be found in <a
								href="https://github.com/eclipse-passage/passage/blob/master/products/org.eclipse.passage.lbc.fls.product/org.eclipse.passage.lbc.fls.product"
								target="_blank">FLS product declaration</a>.
						</p>
					</li>
					<li><p>
							<span class="term">Licensing requirements</span> for the base
							feature <span class="sample">org.eclipse.passage.lbc.acquire.concurrent</span>
							is declared in <a
								href="https://github.com/eclipse-passage/passage/blob/master/bundles/org.eclipse.passage.lbc.base/META-INF/MANIFEST.MF"
								target="_blank">LBC Base</a> bundle: there is no API exposed by
							LBC component, thus <span class="term">licensing
								requirement</span> for a feature must reside close to its
							implementation as a part of the <span class="term">feature</span>
							contract. <span class="note">Location of the requirements
								described here are recommended as a part of approved
								methodology, but not required. <span class="term">Passage
									Access Cycle</span> will find your <span class="term">licensing
									requirement</span> in any runtime available bundle.
							</span>
						</p></li>
					<li><p>
							<span class="term">Licensing requirements</span> for the premium
							feature <span class="sample">org.eclipse.passage.lbc.acquire.concurrent.full</span>
							declared next to its basic version.
						</p>
						<p>
							But unlike it, this one is exposed under <span class="sample">error</span>
							<span class="term">restriction level</span> as it's not supposed
							to be used if not licensed.
						</p></li>
				</ul>
			</div>
		</div>
		<div class="row separator">
			<div class="col-sm-12"></div>
		</div>
		<div class="row statement">
			<div class="step-name col-sm-3">
				Step 2: employ <span class="term">Passage Access Cycle</span>
			</div>
			<div class="step-explanation col-sm-9">
				<p>
					<span class="term">Access Cycle</span> is the part of Passage that
					runs together with your product and empowers licensing protection
					at your product runtime.
				</p>
				<p>
					Three things should be done in you product's code base to utilize <span
						class="term">Access Cycle</span>:
				</p>
				<ul>
					<li>add dependency to <a
						href="https://github.com/eclipse-passage/passage/tree/master/features/org.eclipse.passage.lic.execute.feature">org.eclipse.passage.lic.execute.feature</a>,
					</li>
					<li>configure <span class="term">Access Cycle</span>,
					</li>
					<li>get a <span class="term">product public key</span> from
						the <span class="role">management</span> (which generated it with
						Passage Operator when next product version is defined and signed
						for release) and include it in this version product distribution.
					</li>
				</ul>
			</div>

		</div>
		<div class="row impl">
			<div class="brief col-sm-3">
				<p>
					As FLS is itself <span class="sample">for Passage and on
						Passage</span> product, it gains the vital dependency with the rest of
					Passage parts necessary for functioning.
				</p>
				<p>
					<span class="term">Access Cycle</span> configuration and <span
						class="term">product public key</span> reside in a dedicated
					bundle, methodologically called <span class="term">seal</span>.
				</p>
			</div>
			<div class="col-sm-9">
				<p>
					To configure <span class="term">Access Cycle</span> a <span
						class="role">developer</span> must supply instance of <a
						href="https://github.com/eclipse-passage/passage/blob/master/bundles/org.eclipse.passage.lic.api/src/org/eclipse/passage/lic/api/Framework.java"
						target="_blank">Passage Framework</a> interface by means of the
					current infrastructure DI. For Eclipse ecosystem we use <a
						href="https://www.osgi.org/" target="_blank">OSGi</a>
					implementation.
				</p>
				<p>
					Have a look at <a
						href="https://github.com/eclipse-passage/passage/blob/master/bundles/org.eclipse.passage.lbc.fls.seal/src/org/eclipse/passage/lbc/internal/fls/seal/FlsFramework.java">
						FlsFramework</a>:
				</p>
				<ul>
					<li>it provides an instance of <a
						href="https://github.com/eclipse-passage/passage/blob/master/bundles/org.eclipse.passage.lic.api/src/org/eclipse/passage/lic/api/AccessCycleConfiguration.java"
						target="_blank">AccessCycleConfiguration</a>, packed with all
						necessary services, to Passage runtime
					</li>
					<li>and its <a
						href="https://github.com/eclipse-passage/passage/blob/master/bundles/org.eclipse.passage.lbc.fls.seal/src/org/eclipse/passage/lbc/internal/fls/seal/FlsFrameworkSupplier.java"
						target="_blank">Supplier</a> is declared as <span class="sample">OSGi
							Component</span> to be injected into DI container and thus accessible at
						Passage runtime.
					</li>
				</ul>

				<p>
					The <span class="term">public key</span> file is placed in <a
						href="https://github.com/eclipse-passage/passage/tree/master/bundles/org.eclipse.passage.lbc.fls.seal/OSGI-INF">OSGI-INF</a>
					folder of the same bundle, which supplies <span class="term">Framework</span>
					instance to the Passage runtime. The file <a
						href="https://github.com/eclipse-passage/passage/blob/master/bundles/org.eclipse.passage.lbc.fls.seal/build.properties"
						target="_blank">is included</a> in the bundle binary build.
				</p>
			</div>
		</div>
		<div class="row separator">
			<div class="col-sm-12"></div>
		</div>
		<div class="row statement">
			<div class="step-name col-sm-3">Step 3: implant license checks</div>
			<div class="step-explanation col-sm-9">
				<p>
					A product <span class="role">developer</span> appeals to <span class="term">Access
						Cycle</span> by means of <span class="term">Passage Lic API</span> to cover
					each of the <span class="term">feature</span>s implementation with
					licensing protection.
				</p>
			</div>

		</div>
		<div class="row impl">
			<div class="brief col-sm-3">
			FLVS checks license </div>
			<div class="col-sm-9"></div>
		</div>

	</div>
	<div class="row separator">
		<div class="col-sm-12"></div>
	</div>
	<div class="refs">
		<div class="copyright">&copy; Copyright 2018 - 2021 ArSysOp</div>
		<div class="ref-entry">
			<a href="https://fonts.google.com/specimen/Quicksand?query=Quicksand"
				target="_blank">Quicksand</a> and <a
				href="https://fonts.google.com/specimen/Open+Sans?query=Montserrat"
				target="_blank">Montserrat</a> fonts are used.
		</div>
		<div class="ref-entry">
			<a href="http://shjs.sourceforge.net/" target="_blank">SHJS</a> is
			used to highlight syntaxes.
		</div>
	</div>
</body>
</html>